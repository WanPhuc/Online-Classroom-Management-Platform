@{
    ViewData["Title"] = "Quáº£n lÃ½ bÃ i há»c (AJAX CRUD)";
    Layout = "~/Views/Instructor/Shared/_InstructorLayout.cshtml";
}

<link rel="stylesheet" href="~/css/Instructor/ManageLesson.css" />

<div class="manage-container">
    <!-- âœ… Header -->
    <header class="header">
        <h3><i class="bi bi-journal-text"></i> Quáº£n lÃ½ bÃ i há»c</h3>
    </header>

    <div class="body-layout">
        <!-- âœ… Sidebar -->
        <aside class="sidebar">
            <h5>Chá»©c nÄƒng</h5>
            <button id="btnView" class="btn">Xem táº¥t cáº£</button>
            @if (User.IsInRole("Admin"))
            {
                <button id="btnAdd" class="btn">ThÃªm bÃ i há»c</button>
                <button id="btnDelete" class="btn">XÃ³a bÃ i há»c</button>
            }
        </aside>

        <!-- âœ… Main Container -->
        <main id="mainContent" class="main-content">
            <p class="text-muted">Chá»n má»™t chá»©c nÄƒng á»Ÿ sidebar Ä‘á»ƒ báº¯t Ä‘áº§u...</p>
        </main>
    </div>

    <!-- âœ… Footer -->
    <footer class="footer">
        <p>NhÃ³m 5 - ThÃ nh viÃªn: Nguyá»…n VÄƒn A, Tráº§n Thá»‹ B, LÃª VÄƒn C</p>
    </footer>
</div>

@section Scripts {
<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script>
$(document).ready(function () {
    // ğŸ”¹ Xem danh sÃ¡ch
    $("#btnView").click(function () {
        $("#mainContent").load("/Instructor/GetLessons");
    });

    // ğŸ”¹ ThÃªm bÃ i há»c
    $("#btnAdd").click(function () {
        const title = prompt("Nháº­p tÃªn bÃ i há»c:");
        if (!title) return;
        $.post("/Instructor/AddLesson", { Title: title }, function () {
            alert("âœ… ÄÃ£ thÃªm bÃ i há»c!");
            $("#mainContent").load("/Instructor/GetLessons");
        }).fail(() => alert("âŒ Lá»—i thÃªm bÃ i há»c"));
    });

    // ğŸ”¹ XÃ³a bÃ i há»c
    $("#btnDelete").click(function () {
        const id = prompt("Nháº­p ID bÃ i há»c cáº§n xÃ³a:");
        if (!id) return;
        $.post("/Instructor/DeleteLesson", { id: id }, function () {
            alert("ğŸ—‘ï¸ ÄÃ£ xÃ³a!");
            $("#mainContent").load("/Instructor/GetLessons");
        }).fail(() => alert("âŒ KhÃ´ng thá»ƒ xÃ³a"));
    });
});
</script>
}
